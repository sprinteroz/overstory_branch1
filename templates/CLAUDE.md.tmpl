# {{PROJECT_NAME}} — Overstory Orchestration

> Auto-generated by `overstory init`. You may edit this file.

This project uses **overstory** for Claude Code agent orchestration. Your session
acts as the orchestrator: you decide what work to delegate, spawn worker agents,
monitor progress, and merge results.

## Quick Reference

```bash
# Spawn a worker agent
ov sling <bead-id> --capability <type> --name <agent-name> \
  [--spec <path>] [--files file1,file2] [--parent <agent>] [--depth <n>]

# Check system status
ov status              # Overview of all agents, worktrees, {{TRACKER_NAME}}
ov status --json       # Machine-readable output
ov status --watch      # Live updating

# Messaging (SQLite-backed, ~1-5ms per query)
ov mail send --to <agent> --subject "..." --body "..."
ov mail check          # Your inbox
ov mail list --unread  # All unread messages
ov mail reply <id> --body "..."

# Merge completed work
ov merge --branch <name>   # Merge a specific branch
ov merge --all             # Merge all completed branches
ov merge --dry-run --branch <name>  # Preview conflicts

# Worktree management
ov worktree list       # Show all worktrees with status
ov worktree clean --completed  # Remove finished worktrees

# Context and monitoring
ov prime               # Reload context (config, mulch, recent activity)
ov watch --background  # Start watchdog daemon
ov metrics             # Performance summary
ov log <event> --agent <name>  # Hook-driven event logging
```

## How to Spawn Agents

1. Identify the work using {{TRACKER_NAME}}: `{{TRACKER_CLI}} ready` or `{{TRACKER_CLI}} create "task title"`
2. Choose a capability based on the task:
{{AGENT_DEFINITIONS}}
3. Assign exclusive file scope so agents do not conflict
4. Spawn: `ov sling <bead-id> --capability <type> --name <unique-name> --files src/foo.ts,src/bar.ts`

Each spawned agent gets its own git worktree, branch, CLAUDE.md overlay, and
tmux session. Agents communicate via `ov mail` and report completion
by closing their {{TRACKER_NAME}} issue (`{{TRACKER_CLI}} close <id> --reason "summary"`).

## Hierarchical Delegation

You can spawn **team leads** that themselves spawn sub-workers:

```
Orchestrator (this session)
  └── ov sling bd-xyz --capability lead --name build-lead
        ├── ov sling bd-abc --capability builder --name auth-login
        ├── ov sling bd-def --capability builder --name auth-signup
        └── ov sling bd-ghi --capability builder --name auth-reset
```

Depth limit is configurable (default: 2). Leads use `--parent` and `--depth`
to track hierarchy.

## Checking Status

Run `ov status` to see:
- Active agents and their states (booting, working, stalled, zombie)
- Worktree locations and branches
- Beads issue progress
- Unread mail count

## Canonical Branch

All merges target **{{CANONICAL_BRANCH}}**. Agents work on branches named
`overstory/<agent-name>/<bead-id>`. Never push directly to {{CANONICAL_BRANCH}}.

## Conventions

- Agents own files exclusively — no two agents modify the same file
- Use `ov mail` for all inter-agent communication (not {{TRACKER_NAME}})
- Use `{{TRACKER_CLI}} close` to report task completion (not mail)
- Merge via `ov merge`, not raw `git merge`
- Logs live in `.overstory/logs/` — never delete them manually
